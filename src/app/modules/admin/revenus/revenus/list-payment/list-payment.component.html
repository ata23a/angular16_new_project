<div class="flex flex-col flex-auto min-w-0">
    <div class="flex-auto p-6 sm:p-10">
        <div class="h-400  min-h-400 max-h-400 bg-card">
            <div class="table-responsive">
                <table mat-table class="mat-elevation-z8" [dataSource]="dataTable">
                    <!-- Colonnes de la table -->
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon>menu</mat-icon>
                        </th>
                        <td mat-cell *matCellDef="let revenue">
                            <span class="badge badge-primary pointer" [matTooltip]="'Remboursement'" (click)="refund(revenue)" *ngIf="!revenue.reconciled">
                                <mat-icon>undo</mat-icon>
                            </span>
                            <span class="badge badge-danger pointer ml-1" *ngIf="revenue.payment_method === 'REWARD'" [matTooltip]="'Revenir Paiement'">
                                <mat-icon>arrow_back</mat-icon>
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef>ID</th>
                        <td mat-cell *matCellDef="let revenue">{{ revenue.id }}</td>
                    </ng-container>

                    <ng-container matColumnDef="paid_at">
                        <th mat-header-cell *matHeaderCellDef>Date de pmt.</th>
                        <td mat-cell *matCellDef="let revenue">{{ revenue.paid_at | date:'dd MMM yyyy HH:mm' }}</td>
                    </ng-container>

                    <ng-container matColumnDef="description">
                        <th mat-header-cell *matHeaderCellDef class="width-25">Description</th>
                        <td mat-cell *matCellDef="let revenue">{{ revenue.description }}</td>
                    </ng-container>

                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef>Montant</th>
                        <td mat-cell *matCellDef="let revenue" [class.text-danger]="revenue.amount < 0">{{ revenue.amount.toLocaleString('fr-FR') }}</td>
                    </ng-container>

                    <ng-container matColumnDef="payment_method">
                        <th mat-header-cell *matHeaderCellDef>Moyen de pmt.</th>
                        <td mat-cell *matCellDef="let revenue">{{revenue.payment_method}}</td>
                    </ng-container>

                    <ng-container matColumnDef="account_id">
                        <th mat-header-cell *matHeaderCellDef>Compte</th>
                        <td mat-cell *matCellDef="let revenue">{{ revenue.account_id }}</td>
                    </ng-container>

                    <ng-container matColumnDef="created_at">
                        <th mat-header-cell *matHeaderCellDef class="text-right">Créé</th>
                        <td mat-cell *matCellDef="let revenue">
                            {{ revenue?.User.name }}
                            <span class="text-muted font-size-13 d-block">{{ revenue?.created_at | date:'dd MMM yyyy HH:mm' }}</span>
                        </td>
                    </ng-container>
                    <!-- Lignes de données -->
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <ng-container *ngIf="dataTable.length === 0">
                        <tr mat-row>
                            <td colspan="{{ displayedColumns.length }}" class="text-center">
                                Aucun enregistrement
                            </td>
                        </tr>
                    </ng-container>
                </table>
                <button mat-button class="pull-right" (click)="exportToExcel(dataTable, 'list_payments')">
                    Télécharger
                </button>
            </div>

        </div>
    </div>
</div>
